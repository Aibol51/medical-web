import{u as e,h as a,j as o,l as s,o as t,c as l,w as r,m as n,i,d as u,e as d,r as c,F as m,q as v,p,t as f,s as x,x as g,z as _}from"./index-CoyfKnWG.js";import{_ as j}from"./uv-load-more.ZTuh-_sz.js";import{r as h}from"./uni-app.es.Df7zo4VE.js";import{e as w}from"./expert.D0eEgK8m.js";import{_ as k}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uv-line.DraL9Iaj.js";import"./mixin.BCR4gqL3.js";import"./uv-loading-icon.CbeM7PMZ.js";import"./request.BIpDWIEA.js";const C=k({__name:"index",setup(k){const{t:C}=e(),U=a([]),y=a("loadmore"),z=a(1),q=a(8),A=a(!0);return o((()=>{(async()=>{var e;if(A.value){y.value="loading";try{const a=await w({page:z.value,pageSize:q.value});if(0===a.code){const o=(null==(e=a.data)?void 0:e.data)||[];if(0===o.length&&1===z.value)return A.value=!1,void(y.value="nomore");const s=n(),t="zh-Hans"===s?"Zh":s.charAt(0).toUpperCase()+s.slice(1),l=o.map((e=>({id:e.id,title:e[`name${t}`],converUrl:e.coverUrl})));l.length<q.value?(A.value=!1,y.value="nomore"):y.value="loadmore",U.value=[...U.value,...l],z.value+=1}else A.value=!1,y.value="error"}catch(a){console.error(a),y.value="error"}}})()})),(e,a)=>{const o=g,n=_,w=i,k=h(s("uv-load-more"),j);return t(),l(w,{class:"newsContent"},{default:r((()=>[u(w,{class:"grid-container"},{default:r((()=>[(t(!0),d(m,null,c(U.value,((e,a)=>(t(),l(w,{class:"grid-item",key:a,onClick:a=>{return o=e.id,void x({url:`/pages/expert/components/details?id=${o}`});var o}},{default:r((()=>[u(o,{class:"cover-image",src:e.converUrl},null,8,["src"]),u(w,{class:"cover-content"},{default:r((()=>[u(n,{class:"title"},{default:r((()=>[p(f(e.title),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),u(k,{status:y.value,"loadmore-text":v(C)("news.loadmore"),"loading-text":v(C)("news.loading"),"nomore-text":v(C)("news.nomore")},null,8,["status","loadmore-text","loading-text","nomore-text"])])),_:1})}}},[["__scopeId","data-v-7c2f9c9d"]]);export{C as default};
