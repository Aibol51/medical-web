import{b as e,a}from"./uv-popup.C1hm9IMm.js";import{u as t,h as l,l as s,o as r,c as i,w as u,i as o,e as c,r as d,F as n,d as f,p,t as _,n as v,b as m,z as h}from"./index-CoyfKnWG.js";import{a as y,r as b}from"./uni-app.es.Df7zo4VE.js";import{r as $}from"./request.BIpDWIEA.js";import{_ as g}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uv-icon.B_OJnulS.js";import"./mixin.BCR4gqL3.js";import"./uv-status-bar.B1Q_bF5K.js";const T=g({__name:"index",setup(g){const{t:T}=t(),k=l([]),x=l(null),w=l(null),S=l(-1),C=()=>{(function(e){return $.post("/mms-api/medical_record/list",e,{noAuth:!0})})({page:1,pageSize:50}).then((e=>{0===e.code&&(k.value=e.data.data,console.log(e.data))})).catch((e=>{console.error(e)}))},H=e=>{e.show||(w.value=null,S.value=-1)},j=e=>{if(!e)return"--";const a=new Date(e);return`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`},U=e=>{if(!e)return"--";const a=new Date(e);return`${j(e)} ${String(a.getHours()).padStart(2,"0")}:${String(a.getMinutes()).padStart(2,"0")}`},A=e=>1===e?T("report.habit.0"):2===e?T("report.habit.1"):3===e?T("report.habit.2"):4===e?T("report.habit.3"):5===e?T("report.habit.4"):"未知",R=e=>!!e&&(e.heartRate>100||e.heartRate<50||e.oxygenSaturation<90||1===e.allergyHistory),F=e=>R(e)?T("report.attention"):T("report.normal");return y((()=>{C()})),(t,l)=>{const y=b(s("uv-empty"),e),$=h,g=o,C=b(s("uv-popup"),a);return r(),i(g,{class:"record-list"},{default:u((()=>{var e;return[(null==(e=k.value)?void 0:e.length)?(r(),i(g,{key:1},{default:u((()=>[(r(!0),c(n,null,d(k.value,((e,a)=>(r(),i(g,{key:e.id,class:"record-card",onClick:e=>(e=>{S.value=e,w.value=k.value[e],x.value.open()})(a)},{default:u((()=>[f(g,{class:"record-header"},{default:u((()=>[f(g,{class:"patient-info"},{default:u((()=>[f($,{class:"patient-name"},{default:u((()=>[p(_(e.patientName),1)])),_:2},1024),f($,{class:"gender-age"},{default:u((()=>[p(_(1===e.gender?t.$t("report.male"):t.$t("report.female"))+" | "+_(e.age)+_(t.$t("report.age")),1)])),_:2},1024)])),_:2},1024),f($,{class:"visit-date"},{default:u((()=>[p(_(j(e.createdAt)),1)])),_:2},1024)])),_:2},1024),f(g,{class:"record-brief"},{default:u((()=>[f(g,{class:"brief-item"},{default:u((()=>[f($,{class:"brief-label"},{default:u((()=>[p(_(t.$t("report.complaintTitle"))+"：",1)])),_:1}),f($,{class:"brief-value"},{default:u((()=>[p(_(e.chiefComplaint||t.$t("report.none")),1)])),_:2},1024)])),_:2},1024),f(g,{class:"brief-item"},{default:u((()=>[f($,{class:"brief-label"},{default:u((()=>[p(_(t.$t("report.diagnosis"))+"：",1)])),_:1}),f($,{class:"brief-value"},{default:u((()=>[p(_(e.diagnosis),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),f(g,{class:"record-footer"},{default:u((()=>[f(g,{class:v(["tag",{critical:R(e)}])},{default:u((()=>[p(_(F(e)),1)])),_:2},1032,["class"]),f($,{class:"view-detail"},{default:u((()=>[p(_(t.$t("report.viewDetail"))+" ",1),f($,{class:"arrow"},{default:u((()=>[p("›")])),_:1})])),_:1})])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):(r(),i(y,{key:0,mode:"history",textSize:"18",text:t.$t("report.empty"),width:"200",height:"200"},null,8,["text"])),f(C,{ref_key:"popupRef",ref:x,mode:"bottom",onChange:H,"close-on-click-overlay":!0,closeable:!0,round:20},{default:u((()=>[w.value?(r(),i(g,{key:0,class:"popup-content"},{default:u((()=>[f(g,{class:"popup-header"},{default:u((()=>[f($,{class:"popup-title"},{default:u((()=>[p(_(t.$t("report.popupTitle")),1)])),_:1})])),_:1}),f(g,{class:"detail-section"},{default:u((()=>[f(g,{class:"section-header"},{default:u((()=>[f($,{class:"section-title"},{default:u((()=>[p(_(t.$t("report.basicInfo")),1)])),_:1})])),_:1}),f(g,{class:"info-grid"},{default:u((()=>[f(g,{class:"info-cell"},{default:u((()=>[f($,{class:"info-label"},{default:u((()=>[p(_(t.$t("report.name")),1)])),_:1}),f($,{class:"info-value"},{default:u((()=>[p(_(w.value.patientName),1)])),_:1})])),_:1}),f(g,{class:"info-cell"},{default:u((()=>[f($,{class:"info-label"},{default:u((()=>[p(_(t.$t("report.gender_label")),1)])),_:1}),f($,{class:"info-value"},{default:u((()=>[p(_(1===w.value.gender?t.$t("report.male"):t.$t("report.female")),1)])),_:1})])),_:1}),f(g,{class:"info-cell"},{default:u((()=>[f($,{class:"info-label"},{default:u((()=>[p(_(t.$t("appointment.age")),1)])),_:1}),f($,{class:"info-value"},{default:u((()=>[p(_(w.value.age)+_(t.$t("report.age")),1)])),_:1})])),_:1}),f(g,{class:"info-cell"},{default:u((()=>[f($,{class:"info-label"},{default:u((()=>[p(_(t.$t("report.idCard")),1)])),_:1}),f($,{class:"info-value"},{default:u((()=>{return[p(_((e=w.value.idCardNumber,e?e.length>8?e.substring(0,4)+"****"+e.substring(e.length-4):e:"--")),1)];var e})),_:1})])),_:1}),f(g,{class:"info-cell"},{default:u((()=>[f($,{class:"info-label"},{default:u((()=>[p(_(t.$t("report.phone")),1)])),_:1}),f($,{class:"info-value"},{default:u((()=>[p(_(w.value.phoneNumber),1)])),_:1})])),_:1}),f(g,{class:"info-cell"},{default:u((()=>[f($,{class:"info-label"},{default:u((()=>[p(_(t.$t("report.visitTime")),1)])),_:1}),f($,{class:"info-value"},{default:u((()=>[p(_(U(w.value.createdAt)),1)])),_:1})])),_:1})])),_:1})])),_:1}),f(g,{class:"detail-section"},{default:u((()=>[f(g,{class:"section-header"},{default:u((()=>[f($,{class:"section-title"},{default:u((()=>[p(_(t.$t("report.illnessInfo")),1)])),_:1})])),_:1}),f(g,{class:"info-item"},{default:u((()=>[f($,{class:"info-label"},{default:u((()=>[p(_(t.$t("report.complaintTitle")),1)])),_:1}),f($,{class:"info-value"},{default:u((()=>[p(_(w.value.chiefComplaint||t.$t("report.none")),1)])),_:1})])),_:1}),f(g,{class:"info-item"},{default:u((()=>[f($,{class:"info-label"},{default:u((()=>[p(_(t.$t("report.presentIllnessTitle")),1)])),_:1}),f($,{class:"info-value"},{default:u((()=>[p(_(w.value.presentIllness||t.$t("report.none")),1)])),_:1})])),_:1}),f(g,{class:"info-item"},{default:u((()=>[f($,{class:"info-label"},{default:u((()=>[p(_(t.$t("report.pastHistoryTitle")),1)])),_:1}),f($,{class:"info-value"},{default:u((()=>[p(_(w.value.pastHistory||t.$t("report.none")),1)])),_:1})])),_:1}),f(g,{class:"habit-row"},{default:u((()=>[f(g,{class:v(["habit-item",{warning:[2,3,4].includes(w.value.smokingHistory)}])},{default:u((()=>[f($,{class:"habit-icon"},{default:u((()=>[p("🚬")])),_:1}),f($,{class:"habit-name"},{default:u((()=>[p(_(t.$t("report.smoking")),1)])),_:1}),f($,{class:"habit-status"},{default:u((()=>[p(_(A(w.value.smokingHistory)),1)])),_:1})])),_:1},8,["class"]),f(g,{class:v(["habit-item",{warning:[2,3,4].includes(w.value.drinkingHistory)}])},{default:u((()=>[f($,{class:"habit-icon"},{default:u((()=>[p("🍺")])),_:1}),f($,{class:"habit-name"},{default:u((()=>[p(_(t.$t("report.drinking")),1)])),_:1}),f($,{class:"habit-status"},{default:u((()=>[p(_(A(w.value.drinkingHistory)),1)])),_:1})])),_:1},8,["class"]),f(g,{class:v(["habit-item",{warning:2===w.value.allergyHistory}])},{default:u((()=>[f($,{class:"habit-icon"},{default:u((()=>[p("🧪")])),_:1}),f($,{class:"habit-name"},{default:u((()=>[p(_(t.$t("report.allergy")),1)])),_:1}),f($,{class:"habit-status"},{default:u((()=>{return[p(_((e=w.value.allergyHistory,1===e?T("report.habit.0"):2===e?T("report.habit.1"):"未知")),1)];var e})),_:1})])),_:1},8,["class"])])),_:1})])),_:1}),f(g,{class:"detail-section"},{default:u((()=>[f(g,{class:"section-header"},{default:u((()=>[f($,{class:"section-title"},{default:u((()=>[p(_(t.$t("report.vitalSigns")),1)])),_:1})])),_:1}),f(g,{class:"vital-grid"},{default:u((()=>[f(g,{class:"vital-item"},{default:u((()=>[f($,{class:"vital-value"},{default:u((()=>[p(_(w.value.heartRate),1)])),_:1}),f($,{class:"vital-unit"},{default:u((()=>[p(_(t.$t("report.heartRateUnit")),1)])),_:1}),f($,{class:"vital-name"},{default:u((()=>[p(_(t.$t("report.heartRate")),1)])),_:1})])),_:1}),f(g,{class:"vital-item"},{default:u((()=>[f($,{class:"vital-value"},{default:u((()=>[p(_(w.value.bloodPressure),1)])),_:1}),f($,{class:"vital-unit"},{default:u((()=>[p(_(t.$t("report.bloodPressureUnit")),1)])),_:1}),f($,{class:"vital-name"},{default:u((()=>[p(_(t.$t("report.bloodPressure")),1)])),_:1})])),_:1}),f(g,{class:"vital-item"},{default:u((()=>[f($,{class:"vital-value"},{default:u((()=>[p(_(w.value.oxygenSaturation),1)])),_:1}),f($,{class:"vital-unit"},{default:u((()=>[p(_(t.$t("report.oxygenSaturationUnit")),1)])),_:1}),f($,{class:"vital-name"},{default:u((()=>[p(_(t.$t("report.oxygenSaturation")),1)])),_:1})])),_:1}),f(g,{class:"vital-item"},{default:u((()=>[f($,{class:"vital-value"},{default:u((()=>[p(_(w.value.bloodGlucose),1)])),_:1}),f($,{class:"vital-unit"},{default:u((()=>[p(_(t.$t("report.bloodGlucoseUnit")),1)])),_:1}),f($,{class:"vital-name"},{default:u((()=>[p(_(t.$t("report.bloodGlucose")),1)])),_:1})])),_:1}),f(g,{class:"vital-item"},{default:u((()=>[f($,{class:"vital-value"},{default:u((()=>[p(_(w.value.weight),1)])),_:1}),f($,{class:"vital-unit"},{default:u((()=>[p(_(t.$t("report.weightUnit")),1)])),_:1}),f($,{class:"vital-name"},{default:u((()=>[p(_(t.$t("report.weight")),1)])),_:1})])),_:1}),f(g,{class:"vital-item"},{default:u((()=>[f($,{class:"vital-value"},{default:u((()=>[p(_(w.value.waistCircumference),1)])),_:1}),f($,{class:"vital-unit"},{default:u((()=>[p(_(t.$t("report.waistCircumferenceUnit")),1)])),_:1}),f($,{class:"vital-name"},{default:u((()=>[p(_(t.$t("report.waistCircumference")),1)])),_:1})])),_:1}),f(g,{class:"vital-item"},{default:u((()=>[f($,{class:"vital-value"},{default:u((()=>[p(_(w.value.bodyFat),1)])),_:1}),f($,{class:"vital-unit"},{default:u((()=>[p(_(t.$t("report.bodyFatUnit")),1)])),_:1}),f($,{class:"vital-name"},{default:u((()=>[p(_(t.$t("report.bodyFat")),1)])),_:1})])),_:1})])),_:1})])),_:1}),f(g,{class:"detail-section"},{default:u((()=>[f(g,{class:"section-header"},{default:u((()=>[f($,{class:"section-title"},{default:u((()=>[p(_(t.$t("report.diagnosisTreatment")),1)])),_:1})])),_:1}),f(g,{class:"diagnosis-box"},{default:u((()=>[f($,{class:"diagnosis-label"},{default:u((()=>[p(_(t.$t("report.diagnosisTitle")),1)])),_:1}),f($,{class:"diagnosis-value"},{default:u((()=>[p(_(w.value.diagnosis),1)])),_:1})])),_:1}),f(g,{class:"treatment-box"},{default:u((()=>[f($,{class:"treatment-label"},{default:u((()=>[p(_(t.$t("report.treatmentPlan")),1)])),_:1}),f($,{class:"treatment-value"},{default:u((()=>[p(_(w.value.treatmentPlan),1)])),_:1})])),_:1}),f(g,{class:"therapy-row"},{default:u((()=>[f(g,{class:v(["therapy-item",{"type-1":1===w.value.dietTherapy,"type-2":2===w.value.dietTherapy,"type-3":3===w.value.dietTherapy,"type-4":4===w.value.dietTherapy,"type-5":5===w.value.dietTherapy,"type-6":6===w.value.dietTherapy,"type-7":7===w.value.dietTherapy}])},{default:u((()=>[f($,{class:"therapy-icon"},{default:u((()=>[p("🍽️")])),_:1}),f($,{class:"therapy-name"},{default:u((()=>[p(_(t.$t("report.dietTherapy")),1)])),_:1}),f($,{class:"therapy-status"},{default:u((()=>[p(_(t.$t(`report.diet.${w.value.dietTherapy}`)),1)])),_:1})])),_:1},8,["class"]),f(g,{class:v(["therapy-item",{"exercise-1":1===w.value.exerciseTherapy,"exercise-2":2===w.value.exerciseTherapy}])},{default:u((()=>[f($,{class:"therapy-icon"},{default:u((()=>[p("🏃")])),_:1}),f($,{class:"therapy-name"},{default:u((()=>[p(_(t.$t("report.exerciseTherapy")),1)])),_:1}),f($,{class:"therapy-status"},{default:u((()=>[p(_(t.$t(`report.exercise.${w.value.exerciseTherapy}`)),1)])),_:1})])),_:1},8,["class"]),f(g,{class:v(["therapy-item",{"medication-1":1===w.value.medicationTherapy,"medication-2":2===w.value.medicationTherapy,"medication-3":3===w.value.medicationTherapy,"medication-4":4===w.value.medicationTherapy}])},{default:u((()=>[f($,{class:"therapy-icon"},{default:u((()=>[p("💊")])),_:1}),f($,{class:"therapy-name"},{default:u((()=>[p(_(t.$t("report.medicationTherapy")),1)])),_:1}),f($,{class:"therapy-status"},{default:u((()=>[p(_(t.$t(`report.medication.${w.value.medicationTherapy}`)),1)])),_:1})])),_:1},8,["class"])])),_:1}),w.value.remarks?(r(),i(g,{key:0,class:"remarks-box"},{default:u((()=>[f($,{class:"remarks-label"},{default:u((()=>[p(_(t.$t("report.remarks")),1)])),_:1}),f($,{class:"remarks-value"},{default:u((()=>[p(_(w.value.remarks),1)])),_:1})])),_:1})):m("",!0)])),_:1}),w.value.doctorAdvice?(r(),i(g,{key:0,class:"detail-section"},{default:u((()=>[f(g,{class:"section-header"},{default:u((()=>[f($,{class:"section-title"},{default:u((()=>[p(_(t.$t("report.doctorAdvice")),1)])),_:1})])),_:1}),f(g,{class:"advice-box"},{default:u((()=>[f($,{class:"advice-content"},{default:u((()=>[p(_(w.value.doctorAdvice),1)])),_:1})])),_:1})])),_:1})):m("",!0)])),_:1})):m("",!0)])),_:1},512)]})),_:1})}}},[["__scopeId","data-v-1765fdb1"]]);export{T as default};
