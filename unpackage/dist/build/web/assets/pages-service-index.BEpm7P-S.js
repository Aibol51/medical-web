import{u as e,h as a,j as s,l as o,o as l,c as t,w as r,m as n,i,d as u,e as v,r as c,F as d,q as m,p,t as f,s as g,x,z as _}from"./index-CoyfKnWG.js";import{_ as j}from"./uv-load-more.ZTuh-_sz.js";import{r as h}from"./uni-app.es.Df7zo4VE.js";import{s as w}from"./service.BVlGv279.js";import{_ as k}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uv-line.DraL9Iaj.js";import"./mixin.BCR4gqL3.js";import"./uv-loading-icon.CbeM7PMZ.js";import"./request.BIpDWIEA.js";const C=k({__name:"index",setup(k){const{t:C}=e(),U=a([]),y=a("loadmore"),z=a(1),q=a(8),A=a(!0);return s((()=>{(async()=>{var e;if(A.value){y.value="loading";try{const a=await w({page:z.value,pageSize:q.value});if(0===a.code){const s=(null==(e=a.data)?void 0:e.data)||[];if(0===s.length&&1===z.value)return A.value=!1,void(y.value="nomore");const o=n(),l="zh-Hans"===o?"Zh":o.charAt(0).toUpperCase()+o.slice(1),t=s.map((e=>({id:e.id,title:e[`name${l}`],converUrl:e.coverUrl})));t.length<q.value?(A.value=!1,y.value="nomore"):y.value="loadmore",U.value=[...U.value,...t],z.value+=1}else A.value=!1,y.value="error"}catch(a){console.error(a),y.value="error"}}})()})),(e,a)=>{const s=x,n=_,w=i,k=h(o("uv-load-more"),j);return l(),t(w,{class:"newsContent"},{default:r((()=>[u(w,{class:"grid-container"},{default:r((()=>[(l(!0),v(d,null,c(U.value,((e,a)=>(l(),t(w,{class:"grid-item",key:a,onClick:a=>{return s=e.id,void g({url:`/pages/service/components/details?id=${s}`});var s}},{default:r((()=>[u(s,{class:"cover-image",src:e.converUrl},null,8,["src"]),u(w,{class:"cover-content"},{default:r((()=>[u(n,{class:"title"},{default:r((()=>[p(f(e.title),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),u(k,{status:y.value,"loadmore-text":m(C)("news.loadmore"),"loading-text":m(C)("news.loading"),"nomore-text":m(C)("news.nomore")},null,8,["status","loadmore-text","loading-text","nomore-text"])])),_:1})}}},[["__scopeId","data-v-9465a099"]]);export{C as default};
